import{e as B,b as P,g as st,c as I,d as Ye,_ as Dt,a as zt,k as Tt}from"./@babel-Bssi87AP.js";import{c as ze}from"./classnames-BK5ccKcQ.js";import{R as ct}from"./rc-resize-observer-OqVzQPEu.js";import{t as G,u as Re,j as tt}from"./rc-util-DVEPga9-.js";import{r as t}from"./react-CeYxiRmC.js";import{r as rt}from"./react-dom-Bwn-WS6j.js";var ft=t.forwardRef(function(e,c){var m=e.height,o=e.offsetY,v=e.offsetX,S=e.children,s=e.prefixCls,u=e.onInnerResize,M=e.innerProps,d=e.rtl,R=e.extra,n={},g={display:"flex",flexDirection:"column"};return o!==void 0&&(n={height:m,position:"relative",overflow:"hidden"},g=B(B({},g),{},P(P(P(P(P({transform:"translateY(".concat(o,"px)")},d?"marginRight":"marginLeft",-v),"position","absolute"),"left",0),"right",0),"top",0))),t.createElement("div",{style:n},t.createElement(ct,{onResize:function(h){var l=h.offsetHeight;l&&u&&u()}},t.createElement("div",st({style:g,className:ze(P({},"".concat(s,"-holder-inner"),s)),ref:c},M),S,R)))});ft.displayName="Filler";function Ct(e){var c=e.children,m=e.setRef,o=t.useCallback(function(v){m(v)},[]);return t.cloneElement(c,{ref:o})}function It(e,c,m,o,v,S,s,u){var M=u.getKey;return e.slice(c,m+1).map(function(d,R){var n=c+R,g=s(d,n,{style:{width:o},offsetX:v}),i=M(d);return t.createElement(Ct,{key:i,setRef:function(l){return S(d,l)}},g)})}function Ht(e,c,m){var o=e.length,v=c.length,S,s;if(o===0&&v===0)return null;o<v?(S=e,s=c):(S=c,s=e);var u={__EMPTY_ITEM__:!0};function M(h){return h!==void 0?m(h):u}for(var d=null,R=Math.abs(o-v)!==1,n=0;n<s.length;n+=1){var g=M(S[n]),i=M(s[n]);if(g!==i){d=n,R=R||g!==M(s[n+1]);break}}return d===null?null:{index:d,multiple:R}}function Pt(e,c,m){var o=t.useState(e),v=I(o,2),S=v[0],s=v[1],u=t.useState(null),M=I(u,2),d=M[0],R=M[1];return t.useEffect(function(){var n=Ht(S||[],e||[],c);(n==null?void 0:n.index)!==void 0&&R(e[n.index]),s(e)},[e]),[d]}var nt=(typeof navigator>"u"?"undefined":Ye(navigator))==="object"&&/Firefox/i.test(navigator.userAgent);const vt=function(e,c,m,o){var v=t.useRef(!1),S=t.useRef(null);function s(){clearTimeout(S.current),v.current=!0,S.current=setTimeout(function(){v.current=!1},50)}var u=t.useRef({top:e,bottom:c,left:m,right:o});return u.current.top=e,u.current.bottom=c,u.current.left=m,u.current.right=o,function(M,d){var R=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,n=M?d<0&&u.current.left||d>0&&u.current.right:d<0&&u.current.top||d>0&&u.current.bottom;return R&&n?(clearTimeout(S.current),v.current=!1):(!n||v.current)&&s(),!v.current&&n}};function kt(e,c,m,o,v,S,s){var u=t.useRef(0),M=t.useRef(null),d=t.useRef(null),R=t.useRef(!1),n=vt(c,m,o,v);function g(f,E){if(G.cancel(M.current),!n(!1,E)){var w=f;if(!w._virtualHandled)w._virtualHandled=!0;else return;u.current+=E,d.current=E,nt||w.preventDefault(),M.current=G(function(){var k=R.current?10:1;s(u.current*k,!1),u.current=0})}}function i(f,E){s(E,!0),nt||f.preventDefault()}var h=t.useRef(null),l=t.useRef(null);function y(f){if(e){G.cancel(l.current),l.current=G(function(){h.current=null},2);var E=f.deltaX,w=f.deltaY,k=f.shiftKey,N=E,x=w;(h.current==="sx"||!h.current&&k&&w&&!E)&&(N=w,x=0,h.current="sx");var O=Math.abs(N),X=Math.abs(x);h.current===null&&(h.current=S&&O>X?"x":"y"),h.current==="y"?g(f,x):i(f,N)}}function b(f){e&&(R.current=f.detail===d.current)}return[y,b]}function Nt(e,c,m,o){var v=t.useMemo(function(){return[new Map,[]]},[e,m.id,o]),S=I(v,2),s=S[0],u=S[1],M=function(R){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:R,g=s.get(R),i=s.get(n);if(g===void 0||i===void 0)for(var h=e.length,l=u.length;l<h;l+=1){var y,b=e[l],f=c(b);s.set(f,l);var E=(y=m.get(f))!==null&&y!==void 0?y:o;if(u[l]=(u[l-1]||0)+E,f===R&&(g=l),f===n&&(i=l),g!==void 0&&i!==void 0)break}return{top:u[g-1]||0,bottom:u[i]}};return M}var Ot=function(){function e(){zt(this,e),P(this,"maps",void 0),P(this,"id",0),P(this,"diffKeys",new Set),this.maps=Object.create(null)}return Dt(e,[{key:"set",value:function(m,o){this.maps[m]=o,this.id+=1,this.diffKeys.add(m)}},{key:"get",value:function(m){return this.maps[m]}},{key:"resetRecord",value:function(){this.diffKeys.clear()}},{key:"getRecord",value:function(){return this.diffKeys}}]),e}();function at(e){var c=parseFloat(e);return isNaN(c)?0:c}function $t(e,c,m){var o=t.useState(0),v=I(o,2),S=v[0],s=v[1],u=t.useRef(new Map),M=t.useRef(new Ot),d=t.useRef(0);function R(){d.current+=1}function n(){var i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1;R();var h=function(){var b=!1;u.current.forEach(function(f,E){if(f&&f.offsetParent){var w=f.offsetHeight,k=getComputedStyle(f),N=k.marginTop,x=k.marginBottom,O=at(N),X=at(x),K=w+O+X;M.current.get(E)!==K&&(M.current.set(E,K),b=!0)}}),b&&s(function(f){return f+1})};if(i)h();else{d.current+=1;var l=d.current;Promise.resolve().then(function(){l===d.current&&h()})}}function g(i,h){var l=e(i);u.current.get(l),h?(u.current.set(l,h),n()):u.current.delete(l)}return t.useEffect(function(){return R},[]),[g,n,M.current,S]}var it=14/15;function Bt(e,c,m){var o=t.useRef(!1),v=t.useRef(0),S=t.useRef(0),s=t.useRef(null),u=t.useRef(null),M,d=function(i){if(o.current){var h=Math.ceil(i.touches[0].pageX),l=Math.ceil(i.touches[0].pageY),y=v.current-h,b=S.current-l,f=Math.abs(y)>Math.abs(b);f?v.current=h:S.current=l;var E=m(f,f?y:b,!1,i);E&&i.preventDefault(),clearInterval(u.current),E&&(u.current=setInterval(function(){f?y*=it:b*=it;var w=Math.floor(f?y:b);(!m(f,w,!0)||Math.abs(w)<=.1)&&clearInterval(u.current)},16))}},R=function(){o.current=!1,M()},n=function(i){M(),i.touches.length===1&&!o.current&&(o.current=!0,v.current=Math.ceil(i.touches[0].pageX),S.current=Math.ceil(i.touches[0].pageY),s.current=i.target,s.current.addEventListener("touchmove",d,{passive:!1}),s.current.addEventListener("touchend",R,{passive:!0}))};M=function(){s.current&&(s.current.removeEventListener("touchmove",d),s.current.removeEventListener("touchend",R))},Re(function(){return e&&c.current.addEventListener("touchstart",n,{passive:!0}),function(){var g;(g=c.current)===null||g===void 0||g.removeEventListener("touchstart",n),M(),clearInterval(u.current)}},[e])}function ot(e){return Math.floor(Math.pow(e,.5))}function Fe(e,c){var m="touches"in e?e.touches[0]:e;return m[c?"pageX":"pageY"]-window[c?"scrollX":"scrollY"]}function Ft(e,c,m){t.useEffect(function(){var o=c.current;if(e&&o){var v=!1,S,s,u=function(){G.cancel(S)},M=function g(){u(),S=G(function(){m(s),g()})},d=function(i){if(!(i.target.draggable||i.button!==0)){var h=i;h._virtualHandled||(h._virtualHandled=!0,v=!0)}},R=function(){v=!1,u()},n=function(i){if(v){var h=Fe(i,!1),l=o.getBoundingClientRect(),y=l.top,b=l.bottom;if(h<=y){var f=y-h;s=-ot(f),M()}else if(h>=b){var E=h-b;s=ot(E),M()}else u()}};return o.addEventListener("mousedown",d),o.ownerDocument.addEventListener("mouseup",R),o.ownerDocument.addEventListener("mousemove",n),function(){o.removeEventListener("mousedown",d),o.ownerDocument.removeEventListener("mouseup",R),o.ownerDocument.removeEventListener("mousemove",n),u()}}},[e])}var Yt=10;function Xt(e,c,m,o,v,S,s,u){var M=t.useRef(),d=t.useState(null),R=I(d,2),n=R[0],g=R[1];return Re(function(){if(n&&n.times<Yt){if(!e.current){g(function(ne){return B({},ne)});return}S();var i=n.targetAlign,h=n.originAlign,l=n.index,y=n.offset,b=e.current.clientHeight,f=!1,E=i,w=null;if(b){for(var k=i||h,N=0,x=0,O=0,X=Math.min(c.length-1,l),K=0;K<=X;K+=1){var F=v(c[K]);x=N;var Q=m.get(F);O=x+(Q===void 0?o:Q),N=O}for(var V=k==="top"?y:b-y,ee=X;ee>=0;ee-=1){var te=v(c[ee]),H=m.get(te);if(H===void 0){f=!0;break}if(V-=H,V<=0)break}switch(k){case"top":w=x-y;break;case"bottom":w=O-b+y;break;default:{var re=e.current.scrollTop,$=re+b;x<re?E="top":O>$&&(E="bottom")}}w!==null&&s(w),w!==n.lastTop&&(f=!0)}f&&g(B(B({},n),{},{times:n.times+1,targetAlign:E,lastTop:w}))}},[n,e.current]),function(i){if(i==null){u();return}if(G.cancel(M.current),typeof i=="number")s(i);else if(i&&Ye(i)==="object"){var h,l=i.align;"index"in i?h=i.index:h=c.findIndex(function(f){return v(f)===i.key});var y=i.offset,b=y===void 0?0:y;g({times:0,index:h,offset:b,originAlign:l})}}}var ut=t.forwardRef(function(e,c){var m=e.prefixCls,o=e.rtl,v=e.scrollOffset,S=e.scrollRange,s=e.onStartMove,u=e.onStopMove,M=e.onScroll,d=e.horizontal,R=e.spinSize,n=e.containerSize,g=e.style,i=e.thumbStyle,h=e.showScrollBar,l=t.useState(!1),y=I(l,2),b=y[0],f=y[1],E=t.useState(null),w=I(E,2),k=w[0],N=w[1],x=t.useState(null),O=I(x,2),X=O[0],K=O[1],F=!o,Q=t.useRef(),V=t.useRef(),ee=t.useState(h),te=I(ee,2),H=te[0],re=te[1],$=t.useRef(),ne=function(){h===!0||h===!1||(clearTimeout($.current),re(!0),$.current=setTimeout(function(){re(!1)},3e3))},A=S-n||0,W=n-R||0,ae=t.useMemo(function(){if(v===0||A===0)return 0;var Y=v/A;return Y*W},[v,A,W]),D=function(z){z.stopPropagation(),z.preventDefault()},j=t.useRef({top:ae,dragging:b,pageY:k,startTop:X});j.current={top:ae,dragging:b,pageY:k,startTop:X};var se=function(z){f(!0),N(Fe(z,d)),K(j.current.top),s(),z.stopPropagation(),z.preventDefault()};t.useEffect(function(){var Y=function(he){he.preventDefault()},z=Q.current,T=V.current;return z.addEventListener("touchstart",Y,{passive:!1}),T.addEventListener("touchstart",se,{passive:!1}),function(){z.removeEventListener("touchstart",Y),T.removeEventListener("touchstart",se)}},[]);var de=t.useRef();de.current=A;var pe=t.useRef();pe.current=W,t.useEffect(function(){if(b){var Y,z=function(he){var ce=j.current,Te=ce.dragging,Me=ce.pageY,be=ce.startTop;G.cancel(Y);var me=Q.current.getBoundingClientRect(),Ce=n/(d?me.width:me.height);if(Te){var q=(Fe(he,d)-Me)*Ce,fe=be;!F&&d?fe-=q:fe+=q;var ye=de.current,Ee=pe.current,Ie=Ee?fe/Ee:0,oe=Math.ceil(Ie*ye);oe=Math.max(oe,0),oe=Math.min(oe,ye),Y=G(function(){M(oe,d)})}},T=function(){f(!1),u()};return window.addEventListener("mousemove",z,{passive:!0}),window.addEventListener("touchmove",z,{passive:!0}),window.addEventListener("mouseup",T,{passive:!0}),window.addEventListener("touchend",T,{passive:!0}),function(){window.removeEventListener("mousemove",z),window.removeEventListener("touchmove",z),window.removeEventListener("mouseup",T),window.removeEventListener("touchend",T),G.cancel(Y)}}},[b]),t.useEffect(function(){return ne(),function(){clearTimeout($.current)}},[v]),t.useImperativeHandle(c,function(){return{delayHidden:ne}});var Z="".concat(m,"-scrollbar"),_={position:"absolute",visibility:H?null:"hidden"},U={position:"absolute",background:"rgba(0, 0, 0, 0.5)",borderRadius:99,cursor:"pointer",userSelect:"none"};return d?(_.height=8,_.left=0,_.right=0,_.bottom=0,U.height="100%",U.width=R,F?U.left=ae:U.right=ae):(_.width=8,_.top=0,_.bottom=0,F?_.right=0:_.left=0,U.width="100%",U.height=R,U.top=ae),t.createElement("div",{ref:Q,className:ze(Z,P(P(P({},"".concat(Z,"-horizontal"),d),"".concat(Z,"-vertical"),!d),"".concat(Z,"-visible"),H)),style:B(B({},_),g),onMouseDown:D,onMouseMove:ne},t.createElement("div",{ref:V,className:ze("".concat(Z,"-thumb"),P({},"".concat(Z,"-thumb-moving"),b)),style:B(B({},U),i),onMouseDown:se}))}),Wt=20;function lt(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,c=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,m=e/c*e;return isNaN(m)&&(m=0),m=Math.max(m,Wt),Math.floor(m)}var At=["prefixCls","className","height","itemHeight","fullHeight","style","data","children","itemKey","virtual","direction","scrollWidth","component","onScroll","onVirtualScroll","onVisibleChange","innerProps","extraRender","styles","showScrollBar"],Kt=[],Vt={overflowY:"auto",overflowAnchor:"none"};function jt(e,c){var m=e.prefixCls,o=m===void 0?"rc-virtual-list":m,v=e.className,S=e.height,s=e.itemHeight,u=e.fullHeight,M=u===void 0?!0:u,d=e.style,R=e.data,n=e.children,g=e.itemKey,i=e.virtual,h=e.direction,l=e.scrollWidth,y=e.component,b=y===void 0?"div":y,f=e.onScroll,E=e.onVirtualScroll,w=e.onVisibleChange,k=e.innerProps,N=e.extraRender,x=e.styles,O=e.showScrollBar,X=O===void 0?"optional":O,K=Tt(e,At),F=t.useCallback(function(a){return typeof g=="function"?g(a):a==null?void 0:a[g]},[g]),Q=$t(F),V=I(Q,4),ee=V[0],te=V[1],H=V[2],re=V[3],$=!!(i!==!1&&S&&s),ne=t.useMemo(function(){return Object.values(H.maps).reduce(function(a,r){return a+r},0)},[H.id,H.maps]),A=$&&R&&(Math.max(s*R.length,ne)>S||!!l),W=h==="rtl",ae=ze(o,P({},"".concat(o,"-rtl"),W),v),D=R||Kt,j=t.useRef(),se=t.useRef(),de=t.useRef(),pe=t.useState(0),Z=I(pe,2),_=Z[0],U=Z[1],Y=t.useState(0),z=I(Y,2),T=z[0],ie=z[1],he=t.useState(!1),ce=I(he,2),Te=ce[0],Me=ce[1],be=function(){Me(!0)},me=function(){Me(!1)},Ce={getKey:F};function q(a){U(function(r){var p;typeof a=="function"?p=a(r):p=a;var L=Rt(p);return j.current.scrollTop=L,L})}var fe=t.useRef({start:0,end:D.length}),ye=t.useRef(),Ee=Pt(D,F),Ie=I(Ee,1),oe=Ie[0];ye.current=oe;var we=t.useMemo(function(){if(!$)return{scrollHeight:void 0,start:0,end:D.length-1,offset:void 0};if(!A){var a;return{scrollHeight:((a=se.current)===null||a===void 0?void 0:a.offsetHeight)||0,start:0,end:D.length-1,offset:void 0}}for(var r=0,p,L,C,De=D.length,le=0;le<De;le+=1){var Lt=D[le],_t=F(Lt),et=H.get(_t),Be=r+(et===void 0?s:et);Be>=_&&p===void 0&&(p=le,L=r),Be>_+S&&C===void 0&&(C=le),r=Be}return p===void 0&&(p=0,L=0,C=Math.ceil(S/s)),C===void 0&&(C=D.length-1),C=Math.min(C+1,D.length-1),{scrollHeight:r,start:p,end:C,offset:L}},[A,$,_,D,re,S]),ue=we.scrollHeight,ve=we.start,Se=we.end,Xe=we.offset;fe.current.start=ve,fe.current.end=Se,t.useLayoutEffect(function(){var a=H.getRecord();if(a.size===1){var r=Array.from(a)[0],p=D[ve];if(p){var L=F(p);if(L===r){var C=H.get(r),De=C-s;q(function(le){return le+De})}}}H.resetRecord()},[ue]);var dt=t.useState({width:0,height:S}),We=I(dt,2),J=We[0],ht=We[1],mt=function(r){ht({width:r.offsetWidth,height:r.offsetHeight})},Ae=t.useRef(),Ke=t.useRef(),St=t.useMemo(function(){return lt(J.width,l)},[J.width,l]),gt=t.useMemo(function(){return lt(J.height,ue)},[J.height,ue]),He=ue-S,Pe=t.useRef(He);Pe.current=He;function Rt(a){var r=a;return Number.isNaN(Pe.current)||(r=Math.min(r,Pe.current)),r=Math.max(r,0),r}var xe=_<=0,Le=_>=He,Ve=T<=0,je=T>=l,pt=vt(xe,Le,Ve,je),ke=function(){return{x:W?-T:T,y:_}},Ne=t.useRef(ke()),_e=tt(function(a){if(E){var r=B(B({},ke()),a);(Ne.current.x!==r.x||Ne.current.y!==r.y)&&(E(r),Ne.current=r)}});function Ue(a,r){var p=a;r?(rt.flushSync(function(){ie(p)}),_e()):q(p)}function Mt(a){var r=a.currentTarget.scrollTop;r!==_&&q(r),f==null||f(a),_e()}var Oe=function(r){var p=r,L=l?l-J.width:0;return p=Math.max(p,0),p=Math.min(p,L),p},bt=tt(function(a,r){r?(rt.flushSync(function(){ie(function(p){var L=p+(W?-a:a);return Oe(L)})}),_e()):q(function(p){var L=p+a;return L})}),yt=kt($,xe,Le,Ve,je,!!l,bt),Ge=I(yt,2),$e=Ge[0],Ze=Ge[1];Bt($,j,function(a,r,p,L){var C=L;return pt(a,r,p)?!1:!C||!C._virtualHandled?(C&&(C._virtualHandled=!0),$e({preventDefault:function(){},deltaX:a?r:0,deltaY:a?0:r}),!0):!1}),Ft(A,j,function(a){q(function(r){return r+a})}),Re(function(){function a(p){var L=xe&&p.detail<0,C=Le&&p.detail>0;$&&!L&&!C&&p.preventDefault()}var r=j.current;return r.addEventListener("wheel",$e,{passive:!1}),r.addEventListener("DOMMouseScroll",Ze,{passive:!0}),r.addEventListener("MozMousePixelScroll",a,{passive:!1}),function(){r.removeEventListener("wheel",$e),r.removeEventListener("DOMMouseScroll",Ze),r.removeEventListener("MozMousePixelScroll",a)}},[$,xe,Le]),Re(function(){if(l){var a=Oe(T);ie(a),_e({x:a})}},[J.width,l]);var qe=function(){var r,p;(r=Ae.current)===null||r===void 0||r.delayHidden(),(p=Ke.current)===null||p===void 0||p.delayHidden()},Je=Xt(j,D,H,s,F,function(){return te(!0)},q,qe);t.useImperativeHandle(c,function(){return{nativeElement:de.current,getScrollInfo:ke,scrollTo:function(r){function p(L){return L&&Ye(L)==="object"&&("left"in L||"top"in L)}p(r)?(r.left!==void 0&&ie(Oe(r.left)),Je(r.top)):Je(r)}}}),Re(function(){if(w){var a=D.slice(ve,Se+1);w(a,D)}},[ve,Se,D]);var Et=Nt(D,F,H,s),wt=N==null?void 0:N({start:ve,end:Se,virtual:A,offsetX:T,offsetY:Xe,rtl:W,getSize:Et}),xt=It(D,ve,Se,l,T,ee,n,Ce),ge=null;S&&(ge=B(P({},M?"height":"maxHeight",S),Vt),$&&(ge.overflowY="hidden",l&&(ge.overflowX="hidden"),Te&&(ge.pointerEvents="none")));var Qe={};return W&&(Qe.dir="rtl"),t.createElement("div",st({ref:de,style:B(B({},d),{},{position:"relative"}),className:ae},Qe,K),t.createElement(ct,{onResize:mt},t.createElement(b,{className:"".concat(o,"-holder"),style:ge,ref:j,onScroll:Mt,onMouseEnter:qe},t.createElement(ft,{prefixCls:o,height:ue,offsetX:T,offsetY:Xe,scrollWidth:l,onInnerResize:te,ref:se,innerProps:k,rtl:W,extra:wt},xt))),A&&ue>S&&t.createElement(ut,{ref:Ae,prefixCls:o,scrollOffset:_,scrollRange:ue,rtl:W,onScroll:Ue,onStartMove:be,onStopMove:me,spinSize:gt,containerSize:J.height,style:x==null?void 0:x.verticalScrollBar,thumbStyle:x==null?void 0:x.verticalScrollBarThumb,showScrollBar:X}),A&&l>J.width&&t.createElement(ut,{ref:Ke,prefixCls:o,scrollOffset:T,scrollRange:l,rtl:W,onScroll:Ue,onStartMove:be,onStopMove:me,spinSize:St,containerSize:J.width,horizontal:!0,style:x==null?void 0:x.horizontalScrollBar,thumbStyle:x==null?void 0:x.horizontalScrollBarThumb,showScrollBar:X}))}var Ut=t.forwardRef(jt);Ut.displayName="List";export{Ut as L};
