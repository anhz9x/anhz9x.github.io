import{r as p,j as e}from"./react-CeYxiRmC.js";import{u as x,a as y}from"./react-redux-BgQWloB6.js";import{f as j}from"./index-ug2vDTIo.js";import{F as E}from"./constants-C-fR6r-u.js";import{u as v}from"./user-service-BRiLdQ7h.js";import{m as f}from"./notify-DA3BzPi_.js";import{U as C}from"./UserForm-DQuEUh31.js";import{a as R}from"./react-router-BQwVR8Zd.js";import{F as S,C as T,T as A}from"./antd-CWlyDj0S.js";import"./classnames-BK5ccKcQ.js";import"./use-sync-external-store-Co5PKEhT.js";import"./react-dom-Bwn-WS6j.js";import"./scheduler-CzFDRTuY.js";import"./react-router-dom-o4KdQ8dK.js";import"./@remix-run-3jUiC8cZ.js";import"./@casl-D9HI8Hol.js";import"./@ucast-C1jhqbEt.js";import"./@reduxjs-Dg9g6cAv.js";import"./redux-DITMfSWq.js";import"./immer-DqxjFn0G.js";import"./redux-thunk-ClJT1hhx.js";import"./axios-9PTFF6AP.js";import"./rc-util-DVEPga9-.js";import"./@babel-Bssi87AP.js";import"./@ant-design-NQwz6VZX.js";import"./@emotion-CW87jbl0.js";import"./stylis-D5iaQeiq.js";import"./resize-observer-polyfill-B1PUzC5B.js";import"./rc-resize-observer-OqVzQPEu.js";import"./rc-motion-C3tnhy2U.js";import"./@rc-component-B7glsBvU.js";import"./rc-notification-BU1JQ1oB.js";import"./rc-overflow-BHdZLj7t.js";import"./rc-picker-UBE7xiBA.js";import"./dayjs-Cjk_ngT2.js";import"./rc-tabs-CxzWAOyN.js";import"./rc-dropdown-BO-tmEXF.js";import"./rc-menu-CN7ruIKX.js";import"./rc-select-C2-AJ45Z.js";import"./rc-virtual-list-2uybl3mp.js";import"./rc-field-form-RBvcZ110.js";import"./scroll-into-view-if-needed-DRvhZyyj.js";import"./compute-scroll-into-view-J484ERGr.js";import"./rc-dialog-DjLbSgI8.js";import"./rc-switch-gTEUW9ud.js";import"./rc-table-mlfxtKPe.js";import"./rc-tree-XLUh9fGJ.js";import"./rc-checkbox-DSSeAk8Y.js";import"./rc-pagination-BIRv3rAM.js";import"./throttle-debounce-CUWDS_la.js";import"./rc-input-BMc9GUi3.js";import"./rc-tooltip-Cl3xOnqL.js";import"./rc-textarea-GKK6NUoL.js";import"./copy-to-clipboard-iuHVwNMD.js";import"./toggle-selection-BHUZwh74.js";const Dr=()=>{const s=x(),a=R(),{data:o}=y(r=>r.storeRole),[n]=S.useForm(),[u,c]=p.useState(!1),d=p.useMemo(()=>o.map(r=>({label:r.name,value:r.id})),[o]);p.useEffect(()=>{o.length===0&&s(j(E))},[s,o.length]);const h=async r=>{try{c(!0);const i=await v.create(r);f(i.data.meta.message,i.data.meta.code),a("/users")}catch(i){const{meta:t,data:l}=i;if(l){const g=Object.entries(l).map(([F,m])=>({name:F,errors:Array.isArray(m)?m:[m]}));n.setFields(g)}f(t==null?void 0:t.message,t==null?void 0:t.code)}finally{c(!1)}};return e.jsxs(T,{children:[e.jsx(A.Title,{level:4,children:"Create"}),e.jsx(C,{form:n,roles:d,loading:u,onFinish:h,onCancel:()=>a("/users")})]})};export{Dr as default};
