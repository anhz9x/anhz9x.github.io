import{r as e,j as l}from"./react-CeYxiRmC.js";import{u as x,a as j}from"./react-redux-BgQWloB6.js";import{f as U}from"./index-CBKo7eUj.js";import{F as R}from"./constants-C-fR6r-u.js";import{u as h}from"./user-service-DX6EU1Ct.js";import{U as S}from"./UserForm-DQuEUh31.js";import{m as d}from"./notify-DFuPAhq-.js";import{h as T,a as v}from"./react-router-BQwVR8Zd.js";import{F as A,C as _,T as C}from"./antd-CWlyDj0S.js";import"./classnames-BK5ccKcQ.js";import"./use-sync-external-store-Co5PKEhT.js";import"./react-dom-Bwn-WS6j.js";import"./scheduler-CzFDRTuY.js";import"./react-router-dom-o4KdQ8dK.js";import"./@remix-run-3jUiC8cZ.js";import"./@casl-D9HI8Hol.js";import"./@ucast-C1jhqbEt.js";import"./@reduxjs-Dg9g6cAv.js";import"./redux-DITMfSWq.js";import"./immer-DqxjFn0G.js";import"./redux-thunk-ClJT1hhx.js";import"./axios-9PTFF6AP.js";import"./rc-util-DVEPga9-.js";import"./@babel-Bssi87AP.js";import"./@ant-design-NQwz6VZX.js";import"./@emotion-CW87jbl0.js";import"./stylis-D5iaQeiq.js";import"./resize-observer-polyfill-B1PUzC5B.js";import"./rc-resize-observer-OqVzQPEu.js";import"./rc-motion-C3tnhy2U.js";import"./@rc-component-B7glsBvU.js";import"./rc-notification-BU1JQ1oB.js";import"./rc-overflow-BHdZLj7t.js";import"./rc-picker-UBE7xiBA.js";import"./dayjs-Cjk_ngT2.js";import"./rc-tabs-CxzWAOyN.js";import"./rc-dropdown-BO-tmEXF.js";import"./rc-menu-CN7ruIKX.js";import"./rc-select-C2-AJ45Z.js";import"./rc-virtual-list-2uybl3mp.js";import"./rc-field-form-RBvcZ110.js";import"./scroll-into-view-if-needed-DRvhZyyj.js";import"./compute-scroll-into-view-J484ERGr.js";import"./rc-dialog-DjLbSgI8.js";import"./rc-switch-gTEUW9ud.js";import"./rc-table-mlfxtKPe.js";import"./rc-tree-XLUh9fGJ.js";import"./rc-checkbox-DSSeAk8Y.js";import"./rc-pagination-BIRv3rAM.js";import"./throttle-debounce-CUWDS_la.js";import"./rc-input-BMc9GUi3.js";import"./rc-tooltip-Cl3xOnqL.js";import"./rc-textarea-GKK6NUoL.js";import"./copy-to-clipboard-iuHVwNMD.js";import"./toggle-selection-BHUZwh74.js";const Ot=()=>{const{id:p}=T(),u=x(),f=v(),{data:m}=j(o=>o.storeRole),[a]=A.useForm(),[g,E]=e.useState(!0),y=e.useMemo(()=>m.map(o=>({label:o.name,value:o.id})),[m]);e.useEffect(()=>{m.length===0&&u(U(R))},[u,m.length]),e.useEffect(()=>{(async()=>{var s,t;try{const r=await h.get(p),{data:i}=r.data;a.setFieldsValue({name:i.name,email:i.email,role_ids:i.roles.map(c=>c.id),status:i.status})}catch(r){d((s=r==null?void 0:r.meta)==null?void 0:s.message,(t=r==null?void 0:r.meta)==null?void 0:t.code)}finally{E(!1)}})()},[p,a]);const F=async o=>{try{const s=await h.update(p,{...o,status:o.status?1:0}),{meta:t}=s.data;d(t.message,t.code),f("/users")}catch(s){const{meta:t,data:r}=s;if(r){const i=Object.entries(r).map(([c,n])=>({name:c,errors:Array.isArray(n)?n:[n]}));a.setFields(i)}d(t==null?void 0:t.message,t==null?void 0:t.code)}};return l.jsxs(_,{children:[l.jsx(C.Title,{level:4,children:"Edit"}),l.jsx(S,{form:a,roles:y,loading:g,onFinish:F,onCancel:()=>f("/users"),isEdit:!0})]})};export{Ot as default};
